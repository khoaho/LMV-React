import React from 'react';
import FluxComponent from 'flummox/component';
import DockPanel from './components/DockPanel';
import Viewer from './components/Viewer';


class ViewerView extends React.Component {

    /////////////////////////////////////////////////////////////////
    //
    //
    /////////////////////////////////////////////////////////////////
    static async routerWillRun({flux}) {

        flux.getActions(
            'appState').setActiveView('viewer');
    }

    /////////////////////////////////////////////////////////////////
    //
    //
    /////////////////////////////////////////////////////////////////
    render() {

        const {flux} = this.props;

        return (

            <FluxComponent flux={flux} connectToStores={['viewer']}>

                <DockPanel/>
                <Viewer/>

            </FluxComponent>
        );
    }

    /////////////////////////////////////////////////////////////////
    //
    //
    /////////////////////////////////////////////////////////////////
    componentDidUpdate() {

    }

    /////////////////////////////////////////////////////////////////
    //
    //
    /////////////////////////////////////////////////////////////////
    componentWillMount() {

    }

    /////////////////////////////////////////////////////////////////
    //
    //
    /////////////////////////////////////////////////////////////////
    async componentDidMount() {

        await this.props.flux.getActions(
            'viewer').requestModelInfo();
    }

    /////////////////////////////////////////////////////////////////
    //
    //
    /////////////////////////////////////////////////////////////////
    componentWillUnmount() {

    }
}

ViewerView.defaultProps = {

};

ViewerView.contextTypes = {
    router: React.PropTypes.func
};

export default ViewerView;
